Only in xdebug-2.5.5: buildxdebug.bat
Only in xdebug-2.5.5: config.nice.bat
Only in xdebug-2.5.5: configure.bat
Only in xdebug-2.5.5: configure.js
Only in xdebug-2.5.5: Makefile
Only in xdebug-2.5.5: Makefile.objects
Only in xdebug-2.5.5: Release_TS
diff -r -u xdebug-2.5.5-origin\xdebug.c xdebug-2.5.5\xdebug.c
--- xdebug-2.5.5-origin\xdebug.c	Tue Jun 20 17:44:03 2017
+++ xdebug-2.5.5\xdebug.c	Thu Nov 30 04:39:02 2017
@@ -37,7 +37,7 @@
 #endif
 
 #include "TSRM.h"
-#include "SAPI.h"
+#include "main/SAPI.h"
 #include "main/php_ini.h"
 #include "ext/standard/head.h"
 #include "ext/standard/html.h"
diff -r -u xdebug-2.5.5-origin\xdebug_com.c xdebug-2.5.5\xdebug_com.c
--- xdebug-2.5.5-origin\xdebug_com.c	Tue Jun 20 17:44:03 2017
+++ xdebug-2.5.5\xdebug_com.c	Thu Nov 30 01:44:40 2017
@@ -49,6 +49,55 @@
 
 ZEND_EXTERN_MODULE_GLOBALS(xdebug)
 
+typedef struct pollfd {
+  SOCKET fd;
+  short  events;
+  short  revents;
+} WSAPOLLFD, *PWSAPOLLFD, *LPWSAPOLLFD;
+
+#define POLLRDNORM  0x0100
+#define POLLRDBAND  0x0200
+#define POLLIN      (POLLRDNORM | POLLRDBAND)
+#define POLLPRI     0x0400
+
+#define POLLWRNORM  0x0010
+#define POLLOUT     (POLLWRNORM)
+#define POLLWRBAND  0x0020
+
+#define POLLERR     0x0001
+#define POLLHUP     0x0002
+#define POLLNVAL    0x0004
+
+#define WSAPoll(fd,nfd,t) poll(fd,nfd,t)
+
+// Original source:
+// http://www.slac.stanford.edu/accel/ilc/codes/ATF2/control-software/epics-3.14.10/support/asyn/asyn-4-11/asyn/drvAsynSerial/drvAsynIPPort.c
+/*
+ * Use select() to simulate enough of poll() to get by.
+ */
+
+static int poll(struct pollfd fds[], int nfds, int timeout)
+{
+    fd_set fdset;
+    struct timeval tv, *ptv;
+
+    // assert(nfds == 1);
+    FD_ZERO(&fdset);
+    FD_SET(fds[0].fd,&fdset);
+    if (timeout >= 0) {
+        tv.tv_sec = timeout / 1000;
+        tv.tv_usec = (timeout % 1000) * 1000;
+        ptv = &tv;
+    } else {
+        ptv = NULL;
+    }
+    return select(fds[0].fd + 1,
+        (fds[0].events & POLLIN) ? &fdset : NULL,
+        (fds[0].events & POLLOUT) ? &fdset : NULL,
+        NULL,
+        ptv);
+}
+
 int xdebug_create_socket(const char *hostname, int dport TSRMLS_DC)
 {
 	struct addrinfo            hints;
diff -r -u xdebug-2.5.5-origin\xdebug_handler_dbgp.c xdebug-2.5.5\xdebug_handler_dbgp.c
--- xdebug-2.5.5-origin\xdebug_handler_dbgp.c	Tue Jun 20 17:44:03 2017
+++ xdebug-2.5.5\xdebug_handler_dbgp.c	Thu Nov 30 04:39:06 2017
@@ -24,7 +24,7 @@
 #endif
 
 #include "php.h"
-#include "SAPI.h"
+#include "main/SAPI.h"
 
 #include "ext/standard/php_string.h"
 #include "ext/standard/url.h"
diff -r -u xdebug-2.5.5-origin\xdebug_superglobals.c xdebug-2.5.5\xdebug_superglobals.c
--- xdebug-2.5.5-origin\xdebug_superglobals.c	Tue Jun 20 17:44:03 2017
+++ xdebug-2.5.5\xdebug_superglobals.c	Thu Nov 30 04:39:09 2017
@@ -21,7 +21,7 @@
 #include "xdebug_var.h"
 #include "xdebug_compat.h"
 #include "xdebug_superglobals.h"
-#include "SAPI.h"
+#include "main/SAPI.h"
 
 extern ZEND_DECLARE_MODULE_GLOBALS(xdebug);
 
